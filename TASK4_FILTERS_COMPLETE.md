# Task 4: Filters Module - å®ŒæˆæŠ¥å‘Š

## ğŸ‰ å®Œæˆæ—¥æœŸ
2025å¹´10æœˆ16æ—¥

## âœ… ä»»åŠ¡ç›®æ ‡
å®ç°åœ°ç†åŒºåŸŸè¿‡æ»¤æ¨¡å—ï¼Œæ”¯æŒè¾¹ç•Œæ¡†å’Œå¤šè¾¹å½¢è¿‡æ»¤GNSSè®°å½•ã€‚

---

## ğŸ“¦ å®ç°å†…å®¹

### æ¨¡å—: `src/v2aix_pipeline/filters.py` (çº¦530è¡Œ)

#### 1. **åæ ‡éªŒè¯** (Coordinate Validation)

**`validate_coordinates(lat, lon)`**
- éªŒè¯ç»çº¬åº¦æ˜¯å¦åœ¨æœ‰æ•ˆèŒƒå›´å†…
- çº¬åº¦: -90Â° åˆ° +90Â°
- ç»åº¦: -180Â° åˆ° +180Â°

**`validate_bbox(bbox)`**
- éªŒè¯è¾¹ç•Œæ¡†çš„å®Œæ•´æ€§
- æ£€æŸ¥åæ ‡èŒƒå›´
- ç¡®ä¿ min < max
- è¿”å›å¸ƒå°”å€¼ï¼Œè®°å½•è­¦å‘Šæ—¥å¿—

#### 2. **GeoJSONæ”¯æŒ** (GeoJSON Loading)

**`load_geojson_polygon(geojson_path)`**
- ä»GeoJSONæ–‡ä»¶åŠ è½½å¤šè¾¹å½¢
- æ”¯æŒå¤šç§GeoJSONç»“æ„:
  - Feature
  - FeatureCollection
  - Polygon (ç›´æ¥å‡ ä½•)
  - MultiPolygon (ä½¿ç”¨ç¬¬ä¸€ä¸ªå¤šè¾¹å½¢)
- åæ ‡æ ¼å¼: [lon, lat] (GeoJSONæ ‡å‡†)
- è¿”å›Shapely Polygonå¯¹è±¡

**æ”¯æŒçš„GeoJSONæ ¼å¼ç¤ºä¾‹**:
```json
{
  "type": "Feature",
  "geometry": {
    "type": "Polygon",
    "coordinates": [
      [[6.0, 50.0], [7.0, 50.0], [7.0, 51.0], [6.0, 51.0], [6.0, 50.0]]
    ]
  }
}
```

#### 3. **è¾¹ç•Œæ¡†è¿‡æ»¤** (Bounding Box Filtering)

**`filter_by_bbox(records, bbox, mode)`**

å‚æ•°ï¼š
- `records`: GnssRecordåˆ—è¡¨
- `bbox`: (min_lon, min_lat, max_lon, max_lat)
- `mode`: è¿‡æ»¤æ¨¡å¼

**3ç§è¿‡æ»¤æ¨¡å¼**:

| æ¨¡å¼ | æè¿° | ç”¨ä¾‹ |
|------|------|------|
| `intersect` | åŒ…å«ä»»ä½•åœ¨åŒºåŸŸå†…çš„ç‚¹ | é€šè¿‡åŒºåŸŸçš„è½¦è¾†ï¼ˆé»˜è®¤ï¼‰ |
| `contain` | ä»…åŒ…å«å®Œå…¨åœ¨åŒºåŸŸå†…çš„è½¨è¿¹ | ä»…åœ¨åŒºåŸŸå†…æ´»åŠ¨çš„è½¦è¾† |
| `first` | åŒ…å«èµ·ç‚¹åœ¨åŒºåŸŸå†…çš„è½¦è¾† | ä»åŒºåŸŸå‡ºå‘çš„è½¦è¾† |

**ç¤ºä¾‹**:
```python
bbox = (6.0, 50.0, 7.0, 51.0)  # Aachen region
filtered = filters.filter_by_bbox(all_records, bbox, mode='intersect')
```

#### 4. **å¤šè¾¹å½¢è¿‡æ»¤** (Polygon Filtering)

**`filter_by_polygon(records, polygon, mode)`**
- ä½¿ç”¨Shapelyå‡ ä½•æ“ä½œ
- æ”¯æŒä»»æ„å½¢çŠ¶çš„å¤šè¾¹å½¢
- ç›¸åŒçš„3ç§æ¨¡å¼ (intersect/contain/first)
- é«˜æ•ˆçš„ç‚¹-in-å¤šè¾¹å½¢æµ‹è¯•

**`filter_by_polygon_file(records, geojson_path, mode)`**
- ä¾¿åˆ©å‡½æ•°ï¼Œç»„åˆåŠ è½½å’Œè¿‡æ»¤
- ç›´æ¥ä»GeoJSONæ–‡ä»¶è¿‡æ»¤

#### 5. **å®ç”¨å·¥å…·** (Utility Functions)

**`get_bbox_from_records(records)`**
- ä»è®°å½•è®¡ç®—è¾¹ç•Œæ¡†
- è¿”å›åŒ…å«æ‰€æœ‰ç‚¹çš„æœ€å°bbox

**`get_unique_vehicles(records)`**
- æå–å”¯ä¸€è½¦è¾†IDåˆ—è¡¨
- æ’åºè¾“å‡º

**`group_by_vehicle(records)`**
- æŒ‰è½¦è¾†IDåˆ†ç»„è®°å½•
- è¿”å› Dict[vehicle_id, List[GnssRecord]]

**`filter_summary(original, filtered)`**
- ç”Ÿæˆè¿‡æ»¤æ“ä½œçš„ç»Ÿè®¡æ‘˜è¦
- åŒ…å«:
  - è®°å½•æ•°å˜åŒ–
  - è½¦è¾†æ•°å˜åŒ–
  - å‡å°‘ç™¾åˆ†æ¯”
  - åŸå§‹å’Œè¿‡æ»¤åçš„bbox

---

## ğŸ§ª æµ‹è¯•ç»“æœ

### å•å…ƒæµ‹è¯•è¦†ç›–

âœ… **æµ‹è¯•1**: åæ ‡éªŒè¯
- æœ‰æ•ˆåæ ‡: (50.0, 6.0) â†’ True
- æ— æ•ˆçº¬åº¦: (91.0, 6.0) â†’ False
- æ— æ•ˆç»åº¦: (50.0, 181.0) â†’ False

âœ… **æµ‹è¯•2**: BboxéªŒè¯
- æœ‰æ•ˆbbox â†’ True
- min > max â†’ False (è®°å½•è­¦å‘Š)

âœ… **æµ‹è¯•3**: Bboxè¿‡æ»¤ (intersectæ¨¡å¼)
- 4æ¡è®°å½• â†’ 3æ¡è¿‡æ»¤å
- æ­£ç¡®è¯†åˆ«åŒºåŸŸå†…çš„è®°å½•

âœ… **æµ‹è¯•4**: å¤šè¾¹å½¢è¿‡æ»¤
- çŸ©å½¢å¤šè¾¹å½¢ä¸bboxäº§ç”Ÿç›¸åŒç»“æœ
- Shapelyå‡ ä½•æ­£ç¡®å·¥ä½œ

âœ… **æµ‹è¯•5**: å·¥å…·å‡½æ•°
- `get_unique_vehicles()` âœ“
- `get_bbox_from_records()` âœ“
- æ­£ç¡®è®¡ç®—è¾¹ç•Œ

âœ… **æµ‹è¯•6**: è½¦è¾†åˆ†ç»„
- 3è¾†è½¦è¾†æ­£ç¡®åˆ†ç»„
- v1æœ‰2æ¡è®°å½•ï¼Œv2å’Œv3å„1æ¡

âœ… **æµ‹è¯•7**: è¿‡æ»¤æ‘˜è¦
- ç»Ÿè®¡æ­£ç¡®: 4â†’3è®°å½• (25%å‡å°‘)
- è½¦è¾†ç»Ÿè®¡: 3â†’2è½¦è¾†

### GeoJSONæµ‹è¯•

âœ… **æµ‹è¯•8**: GeoJSONåŠ è½½
- æˆåŠŸåŠ è½½Featureç±»å‹
- å¤šè¾¹å½¢æœ‰5ä¸ªé¡¶ç‚¹ï¼ˆçŸ©å½¢+é—­åˆç‚¹ï¼‰

âœ… **æµ‹è¯•9**: ä»æ–‡ä»¶è¿‡æ»¤
- filter_by_polygon_fileæ­£å¸¸å·¥ä½œ
- 2æ¡è®°å½• â†’ 1æ¡è¿‡æ»¤å

âœ… **æµ‹è¯•10**: ä¸åŒè¿‡æ»¤æ¨¡å¼
- Intersect: 3/4è®°å½•ï¼ˆéƒ¨åˆ†åœ¨åŒºåŸŸå†…ï¼‰
- Contain: 0/4è®°å½•ï¼ˆè½¦è¾†ç¦»å¼€åŒºåŸŸï¼‰
- First: 4/4è®°å½•ï¼ˆèµ·ç‚¹åœ¨åŒºåŸŸå†…ï¼‰

### é›†æˆæµ‹è¯•

âœ… **Discovery + Parser + Filtersé›†æˆ**
```
Step 1: è§£æ3æ¡GNSSè®°å½•
Step 2: è®¡ç®—bbox (6.0839, 50.7753, 6.085, 50.776)
Step 3: æ‰©å±•bboxè¿‡æ»¤ â†’ 3æ¡è®°å½•ï¼ˆå…¨éƒ¨ï¼‰
Step 4: ä¸¥æ ¼bboxè¿‡æ»¤ â†’ 3æ¡è®°å½•
Step 5: æ‘˜è¦ - ä¿ç•™2/2è½¦è¾†
```

âœ… **æ‰€æœ‰10é¡¹æµ‹è¯•é€šè¿‡**
âœ… **é›†æˆæµ‹è¯•é€šè¿‡**

---

## ğŸ¯ åŠŸèƒ½ç‰¹æ€§

### 1. **çµæ´»çš„è¿‡æ»¤ç­–ç•¥**
- âœ… 3ç§è¿‡æ»¤æ¨¡å¼æ»¡è¶³ä¸åŒéœ€æ±‚
- âœ… Bboxå’Œå¤šè¾¹å½¢ä¸¤ç§å‡ ä½•ç±»å‹
- âœ… æ¯è½¦è¾†çš„æ™ºèƒ½åˆ†ç»„

### 2. **é²æ£’æ€§**
- âœ… åæ ‡èŒƒå›´éªŒè¯
- âœ… Bboxå®Œæ•´æ€§æ£€æŸ¥
- âœ… è¯¦ç»†çš„è­¦å‘Šæ—¥å¿—
- âœ… ä¼˜é›…çš„é”™è¯¯å¤„ç†

### 3. **æ€§èƒ½**
- âœ… Shapelyé«˜æ•ˆå‡ ä½•æ“ä½œ
- âœ… å•æ¬¡éå†è¿‡æ»¤ï¼ˆintersectæ¨¡å¼ï¼‰
- âœ… æ™ºèƒ½åˆ†ç»„ï¼ˆcontain/firstæ¨¡å¼ï¼‰

### 4. **æ˜“ç”¨æ€§**
- âœ… ä¾¿åˆ©å‡½æ•° (filter_by_polygon_file)
- âœ… å®ç”¨å·¥å…· (bboxè®¡ç®—ã€åˆ†ç»„ã€æ‘˜è¦)
- âœ… æ¸…æ™°çš„APIè®¾è®¡

---

## ğŸ“Š ä»£ç ç»Ÿè®¡

| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| æ€»è¡Œæ•° | ~530 |
| å‡½æ•°æ•°é‡ | 11 |
| è¿‡æ»¤å‡½æ•° | 4 (bbox, polygon, polygon_file, modes) |
| éªŒè¯å‡½æ•° | 2 (coordinates, bbox) |
| å·¥å…·å‡½æ•° | 5 (bboxè®¡ç®—, åˆ†ç»„, æ‘˜è¦ç­‰) |
| æ–‡æ¡£å­—ç¬¦ä¸²è¦†ç›–ç‡ | 100% |
| ç±»å‹æç¤ºè¦†ç›–ç‡ | 100% |

---

## ğŸ”Œ API ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬ç”¨æ³•

```python
from src.v2aix_pipeline import filters
from pathlib import Path

# 1. Bboxè¿‡æ»¤
bbox = (6.0, 50.0, 7.0, 51.0)
filtered = filters.filter_by_bbox(all_gnss_records, bbox, mode='intersect')

# 2. GeoJSONå¤šè¾¹å½¢è¿‡æ»¤
filtered = filters.filter_by_polygon_file(
    all_gnss_records,
    Path('region.geojson'),
    mode='contain'  # åªè¦å®Œå…¨åœ¨åŒºåŸŸå†…çš„è½¦è¾†
)

# 3. è·å–ç»Ÿè®¡
summary = filters.filter_summary(all_gnss_records, filtered)
print(f"Kept {summary['filtered_vehicles']} of {summary['original_vehicles']} vehicles")
print(f"Reduction: {summary['reduction_pct']}%")

# 4. æŒ‰è½¦è¾†åˆ†ç»„
by_vehicle = filters.group_by_vehicle(filtered)
for vehicle_id, records in by_vehicle.items():
    print(f"{vehicle_id}: {len(records)} records")
```

### ä¸Parseré›†æˆ

```python
from pathlib import Path
from src.v2aix_pipeline import discovery, parser, filters

# è§£ææ•°æ®
all_gnss = []
for json_file in Path('/data').glob('*.json'):
    for obj in discovery._iter_json_objects(json_file):
        gnss_records, _ = parser.parse_records([obj])
        all_gnss.extend(gnss_records)

# è¿‡æ»¤AachenåŒºåŸŸ
bbox = (6.0, 50.0, 7.0, 51.0)
aachen_records = filters.filter_by_bbox(all_gnss, bbox, mode='intersect')

# ç”Ÿæˆæ‘˜è¦
summary = filters.filter_summary(all_gnss, aachen_records)
print(f"Region bbox: {summary['filtered_bbox']}")
print(f"Vehicles in region: {summary['filtered_vehicles']}")
```

---

## ğŸ“ è®¾è®¡å†³ç­–

### 1. **ä¸ºä»€ä¹ˆ3ç§è¿‡æ»¤æ¨¡å¼ï¼Ÿ**
ä¸åŒç ”ç©¶é—®é¢˜éœ€è¦ä¸åŒçš„è¿‡æ»¤è¯­ä¹‰ï¼š
- **Intersect**: æœ€å¸¸ç”¨ï¼Œç ”ç©¶ç»è¿‡æŸåŒºåŸŸçš„è½¦è¾†
- **Contain**: ç ”ç©¶ä»…åœ¨åŒºåŸŸå†…æ´»åŠ¨çš„è½¦è¾†ï¼ˆä¾‹å¦‚åŸå¸‚å†…äº¤é€šï¼‰
- **First**: ç ”ç©¶ä»æŸåŒºåŸŸå‡ºå‘çš„è½¦è¾†ï¼ˆä¾‹å¦‚é€šå‹¤æ¨¡å¼ï¼‰

### 2. **ä¸ºä»€ä¹ˆä½¿ç”¨Shapelyï¼Ÿ**
- è¡Œä¸šæ ‡å‡†çš„å‡ ä½•åº“
- é«˜æ•ˆçš„å‡ ä½•æ“ä½œ
- æ”¯æŒå¤æ‚å¤šè¾¹å½¢
- è‰¯å¥½çš„æ–‡æ¡£å’Œç¤¾åŒº

### 3. **ä¸ºä»€ä¹ˆæŒ‰è½¦è¾†åˆ†ç»„ï¼Ÿ**
Containå’ŒFirstæ¨¡å¼éœ€è¦è€ƒè™‘è½¦è¾†çš„å®Œæ•´è½¨è¿¹ï¼Œè€Œä¸ä»…ä»…æ˜¯å•ä¸ªç‚¹ã€‚åˆ†ç»„å…è®¸å¯¹æ•´ä¸ªè½¨è¿¹åšå†³ç­–ã€‚

### 4. **ä¸ºä»€ä¹ˆæä¾›è¿‡æ»¤æ‘˜è¦ï¼Ÿ**
å¸®åŠ©ç”¨æˆ·äº†è§£è¿‡æ»¤æ“ä½œçš„å½±å“ï¼ŒéªŒè¯è¿‡æ»¤å‚æ•°æ˜¯å¦åˆç†ï¼Œæä¾›å¯é‡ç°çš„ç»Ÿè®¡æ•°æ®ã€‚

---

## ğŸ”— ä¸å…¶ä»–æ¨¡å—çš„é›†æˆ

### è¾“å…¥
- **parser.py**: æ¶ˆè´¹`GnssRecord`åˆ—è¡¨
- **discovery.py**: æœªæ¥å¯èƒ½åœ¨discoveryé˜¶æ®µä½¿ç”¨bboxé¢„è¿‡æ»¤

### è¾“å‡º
- **trajectory.py** (å¾…å®ç°): å°†ä½¿ç”¨è¿‡æ»¤åçš„è®°å½•
- **visualization.py** (å¾…å®ç°): å°†å¯è§†åŒ–è¿‡æ»¤åŒºåŸŸ

### é…ç½®
- **config.py**: PipelineConfigå·²åŒ…å«`region_bbox`å’Œ`region_polygon_path`
- æœªæ¥CLIå¯ä»¥ç›´æ¥è°ƒç”¨filters

---

## âš ï¸ å·²çŸ¥é™åˆ¶

1. **MultiPolygonå¤„ç†**
   - å½“å‰åªä½¿ç”¨ç¬¬ä¸€ä¸ªå¤šè¾¹å½¢
   - åº”è¯¥æ”¯æŒæ‰€æœ‰å¤šè¾¹å½¢çš„å¹¶é›†

2. **å¤§åœ†è·ç¦»**
   - ä½¿ç”¨ç®€å•çš„ç»çº¬åº¦æ¯”è¾ƒ
   - å¯¹äºå¤§è·¨åº¦åŒºåŸŸï¼Œå¯èƒ½ä¸å‡†ç¡®
   - å»ºè®®ï¼šå¯¹äºç²¾ç¡®è·ç¦»ï¼Œå…ˆè½¬æ¢åˆ°æŠ•å½±åæ ‡ç³»

3. **æ€§èƒ½ä¼˜åŒ–**
   - Contain/Firstæ¨¡å¼éœ€è¦å®Œæ•´éå†
   - å¯ä»¥æ·»åŠ ç©ºé—´ç´¢å¼•ï¼ˆR-treeï¼‰ä¼˜åŒ–

4. **è¾¹ç•Œæƒ…å†µ**
   - è·¨è¶Š180Â°ç»çº¿çš„åŒºåŸŸæœªç‰¹æ®Šå¤„ç†
   - æåœ°åŒºåŸŸå¯èƒ½æœ‰é—®é¢˜

---

## ğŸš€ æœªæ¥å¢å¼º

### çŸ­æœŸ
- [ ] æ”¯æŒMultiPolygonæ‰€æœ‰å¤šè¾¹å½¢
- [ ] æ·»åŠ ç©ºé—´ç´¢å¼•ä¼˜åŒ–
- [ ] ç¼“å†²åŒºè¿‡æ»¤ï¼ˆbuffer around polygonï¼‰

### ä¸­æœŸ
- [ ] æ—¶ç©ºè¿‡æ»¤ï¼ˆç©ºé—´+æ—¶é—´çª—å£ï¼‰
- [ ] è·ç¦»è¿‡æ»¤ï¼ˆä»ç‚¹/çº¿çš„è·ç¦»ï¼‰
- [ ] ç»Ÿè®¡è¿‡æ»¤ï¼ˆé€Ÿåº¦ã€åœç•™æ—¶é—´ç­‰ï¼‰

### é•¿æœŸ
- [ ] é“è·¯ç½‘ç»œè¿‡æ»¤
- [ ] åœ°å›¾åŒ¹é…åè¿‡æ»¤
- [ ] åŠ¨æ€åŒºåŸŸï¼ˆæ—¶é—´å˜åŒ–çš„è¾¹ç•Œï¼‰

---

## ğŸ“ˆ æ€§èƒ½åŸºå‡†

åŸºäºæµ‹è¯•æ•°æ®ï¼š

| æ“ä½œ | è®°å½•æ•° | æ—¶é—´ | é€Ÿç‡ |
|------|--------|------|------|
| Bboxè¿‡æ»¤ (intersect) | 4 | <1ms | >4000/s |
| Bboxè¿‡æ»¤ (contain) | 4 | <1ms | >4000/s |
| å¤šè¾¹å½¢è¿‡æ»¤ | 4 | <1ms | >4000/s |
| GeoJSONåŠ è½½ | 1æ–‡ä»¶ | <5ms | - |
| è½¦è¾†åˆ†ç»„ | 4è®°å½•/3è½¦è¾† | <1ms | >4000/s |

*æ³¨: å¾®åŸºå‡†æµ‹è¯•ï¼Œå®é™…æ€§èƒ½å–å†³äºè®°å½•æ•°å’Œå¤šè¾¹å½¢å¤æ‚åº¦*

### å¯æ‰©å±•æ€§æµ‹è¯•ï¼ˆä¼°ç®—ï¼‰

| æ•°æ®è§„æ¨¡ | è®°å½•æ•° | é¢„æœŸæ—¶é—´ (intersect) |
|----------|--------|---------------------|
| å°å‹ | 1,000 | <100ms |
| ä¸­å‹ | 100,000 | <10s |
| å¤§å‹ | 1,000,000 | <100s |

---

## ğŸ“ ç»éªŒæ•™è®­

### æˆåŠŸå› ç´ 
1. **Shapelyé›†æˆ**: ç®€åŒ–äº†å¤æ‚å‡ ä½•æ“ä½œ
2. **æ¨¡å¼è®¾è®¡**: 3ç§æ¨¡å¼è¦†ç›–å¤§å¤šæ•°ç”¨ä¾‹
3. **å·¥å…·å‡½æ•°**: æ‘˜è¦å’Œåˆ†ç»„æå¤§æå‡å¯ç”¨æ€§
4. **è¯¦ç»†æ—¥å¿—**: å¸®åŠ©è°ƒè¯•è¿‡æ»¤é—®é¢˜

### æŠ€æœ¯é€‰æ‹©
- âœ… **Shapely**: æˆç†Ÿã€é«˜æ•ˆã€æ ‡å‡†
- âœ… **GeoJSONæ”¯æŒ**: è¡Œä¸šæ ‡å‡†æ ¼å¼
- âœ… **æŒ‰è½¦è¾†åˆ†ç»„**: æ­£ç¡®å®ç°contain/firstè¯­ä¹‰
- âœ… **ç±»å‹æç¤º**: Dict[str, List[GnssRecord]]æ¸…æ™°

### æ”¹è¿›ç‚¹
- å¯ä»¥æ·»åŠ è¿›åº¦æ¡ï¼ˆtqdmï¼‰ç”¨äºå¤§æ•°æ®é›†
- å¯ä»¥æ·»åŠ å¹¶è¡Œå¤„ç†æ”¯æŒ
- å¯ä»¥æ·»åŠ ç¼“å­˜æœºåˆ¶ï¼ˆpolygonè§£æï¼‰

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- `CLAUDE.md` - é¡¹ç›®æ¶æ„
- `TASK3_PARSER_COMPLETE.md` - Parseræ¨¡å—æ–‡æ¡£
- `src/v2aix_pipeline/models.py` - GnssRecordå®šä¹‰
- `src/v2aix_pipeline/parser.py` - è®°å½•è§£æ
- Shapelyæ–‡æ¡£: https://shapely.readthedocs.io/

---

## âœ… éªŒæ”¶æ ‡å‡†

- [x] è¾¹ç•Œæ¡†è¿‡æ»¤å®ç°
- [x] å¤šè¾¹å½¢è¿‡æ»¤å®ç°
- [x] GeoJSONåŠ è½½æ”¯æŒ
- [x] 3ç§è¿‡æ»¤æ¨¡å¼ (intersect/contain/first)
- [x] åæ ‡éªŒè¯
- [x] BboxéªŒè¯
- [x] è½¦è¾†åˆ†ç»„å·¥å…·
- [x] è¿‡æ»¤æ‘˜è¦ç»Ÿè®¡
- [x] å…¨é¢çš„å•å…ƒæµ‹è¯•ï¼ˆ10é¡¹ï¼‰
- [x] ä¸parseré›†æˆæµ‹è¯•
- [x] 100%æ–‡æ¡£è¦†ç›–
- [x] 100%ç±»å‹æç¤º
- [x] GeoJSONä¸åŒæ ¼å¼æ”¯æŒ

---

## ğŸ¯ ä¸‹ä¸€ä¸ªä»»åŠ¡

**Task 5**: å®ç° `trajectory.py` - è½¨è¿¹æå–å’Œ1Hzæ ‡å‡†åŒ–

**åŠŸèƒ½**:
- è½¨è¿¹å¹³æ»‘ï¼ˆSavitzky-Golayæ»¤æ³¢ï¼‰
- 1Hzé‡é‡‡æ ·ï¼ˆçº¿æ€§æ’å€¼ï¼‰
- é—´éš™æ£€æµ‹å’Œå¤„ç†
- è´¨é‡æ ‡å¿—ï¼ˆgap, extrapolated, low_speedï¼‰
- æŒ‰è½¦è¾†ç»„ç»‡è½¨è¿¹

**é¢„è®¡å·¥ä½œé‡**: 4-5å°æ—¶
**ä¾èµ–**: numpy, scipy (å·²åœ¨requirements.txtä¸­)

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2025å¹´10æœˆ16æ—¥ 20:30
**ä½œè€…**: Claude Code
**çŠ¶æ€**: âœ… Task 4 å®Œæˆ
